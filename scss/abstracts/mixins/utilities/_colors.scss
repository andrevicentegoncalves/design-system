@use 'sass:map';
@use 'sass:string';
@use 'helpers' as *;

// ========================================================================== //
//                              MIXINS: COLORS                                //
// ========================================================================== //

/// Generate text color utility classes
/// @param {Map} $theme-mappings - Color token mappings
/// @param {String} $prefix - Class name prefix
@mixin generate-text-colors($theme-mappings, $prefix: 'color') {
  @each $token-name, $values in $theme-mappings {
    .#{$prefix}-#{$token-name} {
      color: var(--color-#{$token-name});
    }
  }
}

/// Generate background color utility classes
/// @param {Map} $theme-mappings - Color token mappings
/// @param {String} $prefix - Class name prefix
@mixin generate-background-colors($theme-mappings, $prefix: 'background') {
  @each $token-name, $values in $theme-mappings {
    // Skip "on-*" tokens - they're for text/foreground only
    @if not string.index($token-name, 'on-') {
      .#{$prefix}-#{$token-name} {
        background-color: var(--color-#{$token-name});
      }
    }
  }
}

@mixin generate-border-colors($theme-mappings, $prefix: 'border-color') {
  @each $token-name, $values in $theme-mappings {
    // Only include tokens that start with "border-"
    @if string.index($token-name, 'border-') == 1 {
      // Remove 'border-' (which is 7 characters)
      $suffix: string.slice($token-name, 8);
      .#{$prefix}-#{$suffix} {
        border-color: var(--color-#{$token-name});
      }
    }
  }
}

/// Generate badge and tier color combinations
@mixin generate-color-combos() {
  // Feedback badges
  .badge {
    &-success {
      color: var(--color-on-feedback);
      background-color: var(--color-feedback-success);
    }
    
    &-info {
      color: var(--color-on-feedback);
      background-color: var(--color-feedback-info);
    }
    
    &-warning {
      color: var(--color-on-feedback);
      background-color: var(--color-feedback-warning);
    }
    
    &-danger {
      color: var(--color-on-feedback-danger);
      background-color: var(--color-feedback-danger);
    }
  }
  
  // Tier badges
  .tier {
    &-miles {
      color: var(--color-on-tier);
      background-color: var(--color-tier-miles);
    }
    
    &-gold {
      color: var(--color-on-tier);
      background-color: var(--color-tier-gold);
    }
    
    &-silver {
      color: var(--color-on-tier);
      background-color: var(--color-tier-silver);
    }
    
    &-navigator {
      color: var(--color-on-tier-navigator);
      background-color: var(--color-tier-navigator);
    }
  }
}

@mixin bg-color-alpha($color-var, $opacity) {
  position: relative;
  
  &::before {
      content: '';
      position: absolute;
      inset: 0;
      background-color: var($color-var);
      opacity: $opacity;
      z-index: -1;
      @include gpu-accelerate;
  }
}

/// Generate legacy color utilities for backward compatibility
@mixin generate-legacy-colors() {
  /* LEGACY COLOR UTILITIES - DEPRECATED */
  
  // Text colors
  .color {
    &-primary-light { color: var(--color-primary-light); }
    &-success { color: var(--color-success); }
    &-danger { color: var(--color-danger); }
    &-danger-light { color: var(--color-danger-light); }
    &-danger-extra-light { color: var(--color-danger-extra-light); }
    &-warning { color: var(--color-warning); }
    &-warning-light { color: var(--color-warning-light); }
    &-info { color: var(--color-info); }
    &-info-light { color: var(--color-info-light); }
    &-info-extra-light { color: var(--color-info-extra-light); }
    &-light { color: var(--color-light); }
    &-dark { color: var(--color-dark); }
  }
  
  // Background colors
  .background {
    &-primary-light { background-color: var(--color-primary-light); }
    &-success { background-color: var(--color-success); }
    &-danger { background-color: var(--color-danger); }
    &-danger-light { background-color: var(--color-danger-light); }
    &-danger-extra-light { background-color: var(--color-danger-extra-light); }
    &-warning { background-color: var(--color-warning); }
    &-warning-light { background-color: var(--color-warning-light); }
    &-info { background-color: var(--color-info); }
    &-info-light { background-color: var(--color-info-light); }
    &-info-extra-light { background-color: var(--color-info-extra-light); }
    &-light { background-color: var(--color-light); }
    &-dark { background-color: var(--color-dark); }
    &-footer-section { background-color: var(--color-footer-section); }
  }
}